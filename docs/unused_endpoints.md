# BlockID Unused Endpoints Report

**Generated by scanning routes and codebase for endpoint references.**

---

## Summary

| Endpoint | Referenced in | Status |
|----------|---------------|--------|
| GET /api/trust-score/{wallet} | SDK example only | No tests, no load test |
| POST /api/trust-score/list | locustfile.py | Used |
| GET /wallet/{address} | SDK example only | No tests, no load test |
| GET /health | SDK example only | No tests (infra probe) |
| POST /track-wallet | tests/test_wallet_tracking.py | Used |
| POST /track_wallet | SDK example only | No tests |
| GET /tracked_wallets | tests/test_wallet_tracking.py | Used |
| POST /import_wallets_csv | tests/test_wallet_tracking.py | Used |
| GET /wallet_report/{wallet} | SDK example only | No tests |
| GET /debug/wallet_status/{wallet} | SDK example only | No tests |

---

## Endpoints Not Referenced in Tests or Load Tests

These endpoints are defined in the API but are **not called by any test (pytest) or load test (locust)**. They may still be used by external clients, documentation, or the Python SDK example.

### GET /api/trust-score/{wallet}

- **Definition:** `backend_blockid/api_server/trust_score.py`
- **References:** `docs/python_sdk_example.py` (BlockIDClient.get_trust_score)
- **Tests/Locust:** None
- **Note:** Load test uses POST /api/trust-score/list instead. Single-wallet fetch has no automated coverage.

---

### GET /wallet/{address}

- **Definition:** `backend_blockid/api_server/server.py`
- **References:** `docs/python_sdk_example.py` (BlockIDClient.get_wallet)
- **Tests/Locust:** None
- **Note:** Legacy endpoint; overlaps with GET /api/trust-score/{wallet}. Different response shape (address, trust_score, computed_at, flags vs wallet, score, risk, oracle_pubkey, pda).

---

### GET /health

- **Definition:** `backend_blockid/api_server/server.py`
- **References:** `docs/python_sdk_example.py` (BlockIDClient.health)
- **Tests/Locust:** None
- **Note:** Typically used by Kubernetes, load balancers, or orchestration. No in-repo test calls it.

---

### POST /track_wallet

- **Definition:** `backend_blockid/api_server/server.py`
- **References:** `docs/python_sdk_example.py` (BlockIDClient.track_wallet_step2)
- **Tests/Locust:** None
- **Note:** Step 2 wallet tracking (with optional label). Tests use POST /track-wallet (main scheduler) instead. No test coverage for Step 2 endpoint.

---

### GET /wallet_report/{wallet}

- **Definition:** `backend_blockid/api_server/server.py`
- **References:** `docs/python_sdk_example.py` (BlockIDClient.get_wallet_report)
- **Tests/Locust:** None
- **Note:** Runs full analytics pipeline on demand. No automated test (expensive operation).

---

### GET /debug/wallet_status/{wallet}

- **Definition:** `backend_blockid/api_server/server.py`
- **References:** `docs/python_sdk_example.py` (BlockIDClient.debug_wallet_status)
- **Tests/Locust:** None
- **Note:** Debug endpoint. Requires ORACLE_* config for on-chain check. No test coverage.

---

## Endpoints Referenced in Tests or Load Tests

| Endpoint | Caller |
|----------|--------|
| POST /api/trust-score/list | locustfile.py |
| POST /track-wallet | tests/test_wallet_tracking.py |
| GET /tracked_wallets | tests/test_wallet_tracking.py |
| POST /import_wallets_csv | tests/test_wallet_tracking.py |

---

## Methodology

- **Scanned:** `backend_blockid/api_server/` (server.py, trust_score.py)
- **Searched for:** HTTP calls to each path in tests/, locustfile.py, batch_publish.py, main.py, and other Python files
- **Excluded:** OpenAPI schema, api_reference.md, python_sdk_example.py from "referenced" when determining test/load-test coverage (they document all endpoints)
- **Result:** 6 endpoints have no pytest or locust coverage; 4 endpoints are covered

---

## Recommendations

1. **GET /wallet/{address} vs GET /api/trust-score/{wallet}:** Consider deprecating `/wallet/{address}` if `/api/trust-score/{wallet}` is the preferred API.
2. **POST /track_wallet:** Add a test if Step 2 tracking is production-critical.
3. **GET /health:** Add a simple pytest for liveness if not covered by infra.
4. **GET /wallet_report, GET /debug/wallet_status:** Consider mocking or smoke tests if these are used in production workflows.
